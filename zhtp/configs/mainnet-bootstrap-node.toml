# Mainnet Bootstrap Node Configuration
# Purpose: Public seed node for mainnet network discovery
# Role: Accept incoming connections from new nodes, provide peer discovery
# Note: Bootstrap nodes should have high uptime and stable network connections

mesh_mode = "Hybrid"
security_level = "Maximum"
environment = "Mainnet"
data_directory = "./data/mainnet-bootstrap"

[node]
name = "MainnetBootstrap"
description = "ZHTP Mainnet Bootstrap Seed Node"
mesh_port = 33444
api_port = 9333
public_node = true  # Accept all incoming connections
advertise_externally = true
max_peers = 500     # High peer capacity for bootstrap node

# Resource allocation for bootstrap node
min_ram_mb = 4096
min_storage_gb = 100
min_cpu_cores = 4

[blockchain_config]
network_id = "zhtp-mainnet"
chain_id = 1
enforce_chain_id = true  # CRITICAL: Strict mainnet chain ID enforcement

# Blockchain settings
block_time_seconds = 10
max_block_size = 2097152  # 2MB
max_transactions_per_block = 4096

# Features
zk_transactions = true
smart_contracts = true
ubi_enabled = true
dao_enabled = true

# Bootstrap nodes don't validate blocks (for performance)
validator_enabled = false
mining_enabled = false

# But they do provide storage services
storage_node = true
storage_capacity_gb = 100
replication_factor = 3

[network_config]
# Bootstrap nodes don't need initial peers - they ARE the initial peers
bootstrap_peers = []

# Network addresses to advertise
# NOTE: Replace with actual DNS/IP before deployment
advertise_address = "mainnet-seed1.sovereign.net:9333"
external_ip = "0.0.0.0"  # Bind to all interfaces

# Network protocols
protocols = ["tcp", "quic"]  # Production protocols only
mesh_port = 33444
max_peers = 500
min_peers = 10
target_peers = 100

# Connection settings
connection_timeout_seconds = 30
heartbeat_interval_seconds = 60
peer_discovery_interval_seconds = 300

# NAT traversal
upnp_enabled = true
nat_pmp_enabled = true

# Long-range relay for global connectivity
long_range_relays = true
relay_capacity = 100

[security]
security_level = "Maximum"

# Post-quantum cryptography (required for mainnet)
dilithium_level = 5     # CRYSTALS-Dilithium Level 5 (highest security)
kyber_level = 1024      # Kyber-1024 (highest security)

# Signature verification
require_signatures = true
verify_all_transactions = true
verify_all_blocks = true

# Rate limiting (prevent DDoS)
rate_limit_enabled = true
max_requests_per_second = 1000
max_connections_per_ip = 10
ban_duration_minutes = 60

# Firewall rules
allow_incoming = true
allow_outgoing = true
whitelist_enabled = false
blacklist_enabled = true

[consensus]
consensus_mode = "Observer"  # Bootstrap nodes observe but don't participate
sync_mode = "Full"           # Keep full blockchain copy
pruning_enabled = false      # Keep all historical data

[storage]
storage_backend = "RocksDB"
data_directory = "./data/mainnet-bootstrap"

# Storage paths
blockchain_db = "./data/mainnet-bootstrap/blockchain"
wallet_db = "./data/mainnet-bootstrap/wallets"
identity_db = "./data/mainnet-bootstrap/identities"
state_db = "./data/mainnet-bootstrap/state"
contracts_db = "./data/mainnet-bootstrap/contracts"

# Performance settings
cache_size_mb = 2048
write_buffer_mb = 512
max_open_files = 1000

# Backup settings
auto_backup_enabled = true
backup_interval_hours = 24
backup_retention_days = 7

[api]
enabled = true
host = "0.0.0.0"  # Bind to all interfaces
port = 9333

# API endpoints
enable_blockchain_api = true
enable_wallet_api = true
enable_identity_api = true
enable_storage_api = true
enable_metrics_api = true

# CORS for web access
cors_enabled = true
cors_origins = ["*"]  # Allow all origins for public node

# Rate limiting
api_rate_limit = 100
api_burst_limit = 200

[logging]
log_level = "Info"
log_file = "./logs/mainnet-bootstrap.log"
log_rotation = "Daily"
log_retention_days = 30

# Detailed logging for monitoring
log_peer_connections = true
log_transactions = false  # Too verbose for bootstrap
log_blocks = true
log_api_requests = true

[metrics]
enabled = true
prometheus_port = 9090
metrics_interval_seconds = 60

# Health checks
health_check_enabled = true
health_check_port = 9091
health_check_interval_seconds = 30

[economic]
# Universal Basic Income
ubi_enabled = true
ubi_amount_per_day = 33  # 33 ZHTP per day (mainnet rate)
ubi_distribution_hour = 0

# DAO participation
dao_enabled = true
dao_voting_enabled = true
dao_proposal_enabled = true

[web4]
web4_enabled = true
web4_port = 8080
web4_storage_enabled = true
_gateway_enabled = false

[mesh]
mesh_mode = "Hybrid"
mesh_protocols = ["tcp", "quic"]
mesh_encryption = true

# Bluetooth and WiFi Direct disabled for server node
bluetooth_enabled = false
wifi_direct_enabled = false

#  features
tor_integration = false
i2p_integration = false

[maintenance]
# Automatic updates
auto_update_enabled = false  # Manual updates for stability
update_check_interval_hours = 24

# Resource monitoring
monitor_resources = true
max_cpu_percent = 80
max_memory_percent = 90
max_disk_percent = 95

# Automatic cleanup
auto_cleanup_enabled = true
cleanup_interval_days = 7
keep_blocks = 0  # Keep all blocks (no pruning)

[advanced]
# Thread pool sizes
worker_threads = 8
blocking_threads = 16

# Network buffer sizes
send_buffer_kb = 1024
recv_buffer_kb = 1024

# Consensus parameters (observation only)
block_validation_threads = 4
transaction_validation_threads = 8

# Zero-knowledge proof settings
zk_proof_threads = 4
proof_cache_size_mb = 1024
