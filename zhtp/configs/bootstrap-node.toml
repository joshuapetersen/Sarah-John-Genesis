# Bootstrap Node Configuration
# Large DHT nodes that serve the entire blockchain to anyone
# Users connect through their ISPs, but can ONLY access blockchain data
# No general internet routing/proxying allowed

[node]
node_type = "bootstrap"
node_name = "Bootstrap DHT Node"

[network]
# Bootstrap nodes accept connections on all interfaces
listen_address = "0.0.0.0"
api_port = 9333
mesh_port = 9090
bootstrap_port = 9091
quic_port = 9092

# Public IP/domain for other nodes to discover this bootstrap
# Set this to your server's public IP or domain
public_address = "YOUR_PUBLIC_IP_OR_DOMAIN"

# Allow connections from any IP (anyone can bootstrap through their ISP)
allow_external_connections = true

# Maximum concurrent connections (large bootstrap node)
max_connections = 50000

[network_isolation]
# BOOTSTRAP NODES: NO network isolation needed
# Normal internet connectivity required for:
# - SSH administration
# - Package updates
# - Monitoring/metrics
# - Connection to other nodes
#
# Security comes from application-level enforcement:
# - The zhtp application only implements blockchain protocols
# - No HTTP proxy functionality exists in the codebase
# - No SOCKS proxy functionality exists
# - No general packet forwarding/routing implemented
#
# Network isolation (enable_isolation=true) is ONLY for:
# - Pure mesh deployments (ISP-free, local-only networks)
# - Emergency/military/festival scenarios
# - NOT for public bootstrap nodes
enable_isolation = false

[storage]
# Bootstrap nodes hold the ENTIRE blockchain (large DHT nodes)
storage_path = "./bootstrap_data"
storage_capacity_gb = 2000  # 2TB for complete blockchain + DHT
cache_size_mb = 16384       # 16GB cache for fast serving
enable_pruning = false       # Keep everything - we're a permanent archive

# DHT configuration for large bootstrap node
[dht]
enabled = true
max_entries = 10000000      # 10M entries for full blockchain DHT
replication_factor = 3
maintenance_interval = 300

[blockchain]
# Bootstrap nodes sync and serve full blockchain
sync_mode = "full"
enable_fast_sync = true
checkpoint_interval = 1000
serve_headers = true         # Serve headers to edge nodes
serve_blocks = true          # Serve full blocks to full nodes
serve_proofs = true          # Serve ZK proofs for verification

# Bootstrap nodes don't validate/produce blocks (read-only)
smart_contracts = false
enable_web4 = false

[consensus]
# Bootstrap nodes are NOT validators (read-only service)
validator_enabled = false
participate_in_consensus = false

# Track validator set for routing
track_validators = true
validator_connection_timeout = 30

[protocols]
# Only blockchain protocols are IMPLEMENTED in the codebase
# No HTTP proxy, SOCKS proxy, or general forwarding exists
enable_zhtp = true
enable_dht = true
enable_mesh = true
enable_quic = true

[security]
# Rate limiting to prevent abuse
enable_rate_limiting = true
max_requests_per_second = 10000    # High throughput for public bootstrap
max_connections_per_ip = 100       # Reasonable per-IP limit

# Connection timeouts
connection_timeout_seconds = 30
idle_timeout_seconds = 600         # 10 minutes idle before disconnect

# DDoS protection
enable_connection_throttling = true
max_connection_rate_per_ip = 10    # Max 10 new connections/second per IP

[logging]
level = "info"
log_to_file = true
log_file = "./logs/bootstrap.log"
log_rotation_size_mb = 100
log_retention_days = 30

[metrics]
enable_metrics = true
metrics_port = 9093
expose_public_metrics = true       # Safe - only connection/bandwidth stats

# Metrics to track
track_connection_origins = true
track_data_served = true
